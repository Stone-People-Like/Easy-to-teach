# 《数据库基础》

[TOC]

## 一.数据库基础

### 一.数据库的基本概念

数据库（Database，DB）是存储在计算机内，**有组织，可共享的数据集合**。具有**冗余度低，独立性高，易于扩充，修改方便和能够实现数据共享**的优点。

*   **数据库管理系统 (DBMS)**

    是位于用户和操作系统之间的一层**数据管理软件**，是数据库的核心技术。
    
    主要功能：**数据定义**、**数据操纵**、**数据库的控制**、**数据库的维护**。
    
    常用软件：`Access`，`SQLite`，`MySQL`，`SQLServer`。

*   **数据库系统**

    通常是指带有数据库的计算机系统。

### 二.数据库系统的特征

1.  **数据结构化**
2.  **数据的共享性高**
3.  **数据独立性高**
4.  **数据由DBMS统一管理和控制**

### 三.数据模型

##### 一.关系数据库系统

采用**二维表**作为基本数据结构。**结构简单，数据独立性强**。

| 主要关系型数据库 | 描述 |
| :--- | :--- |
| **`SQLite`** | **轻量级嵌入式**，无需配置，体积小，速度快，跨平台 |
| **`SQL Server`** | **微软**推出，使用方便，可伸缩性好 |
| **`Oracle`** | **甲骨文**推出，大型专业，适用于**大批量处理数据** |
| **`MySQL`** | **开源小型**，体积小，速度快，成本低 |

##### 二.非关系数据库系统 (`NoSQL`)

**适合追求速度和可扩展性，业务多变的应用场景**。**扩展能力强，获取效率高**。

| 分类 | 典型软件 | 优缺点 |
| :--- | :--- | :--- |
| **键值对 (`key-value`)** | `Redis` | 优：**快速查询**；缺：需存储关系 |
| **列存储** | `Hbase` | 优：**快速查询，扩展性强**；缺：功能局限 |
| **文档数据库** | `MongoDB` | 优：**结构不严**；缺：查询性能较差 |
| **图形数据库** | `InfoGrid` | 优：**图结构计算**；缺：全图计算难 |

### 四.数据表及其结构

**数据表是数据库的重要组成部分之一**，是实际存放数据的地方。

**设计规则**：
1.  **不包含重复数据**：每条信息只出现一次（除公共关键字）。
2.  **只包含一个主体信息**。

**组成**：
*   **字段**：数据表中的数据项，表示某一性质。
*   **记录**：数据表中的一行数据。

**常用数据类型**：

| 类型 | 描述 | 举例 |
| :--- | :--- | :--- |
| **字符型** | 存放字符 | 姓名，地址 |
| **数值型** | 存放**用于运算**的数值 | 工资，身高 |
| **日期型** | 存放日期/时间 | 出生日期 |
| **逻辑型** | 只有两种结果 | `True`，`False` |

## 二.`SQL`语言

中文名：**结构化查询语言** (`Structured Query Language`)
作用：**查找**、**添加**、**修改**、**删除**。

### 一.结构化查询语言`SQL`

**主要优势**：
1.  **非过程化语言**：只需输入命令，**无判断/循环语句**。
2.  **简洁易学**：掌握少量核心命令即可。
3.  **可移植性强**：主流数据库均支持。

**四类语句**：

| 描述 | 代码 |
| :--- | :--- |
| **数据查询** | `SELECT` |
| **数据操纵** | `INSERT`，`UPDATE`，`DELETE` |
| **数据定义** | `CREATE`，`ALTER`，`DROP` |
| **数据控制** | `COMMIT`，`ROLLBACK` |

### 二.创建数据库数据表

均由 **`CREATE`** 语句完成。

**1. 创建数据库**
```sql
CREATE database 数据库名
```
*建议使用英文数据库名。*

**2. 创建数据表**
```sql
CREATE table 数据表名 (
    字段一 字段类型 [NOT NULL] [PRIMARY KEY], 
    ...
)
```
*   **`NOT NULL`**：不能为空。
*   **`PRIMARY KEY`**：**主键**，确保**数据唯一性**。

**常见字段类型**：
*   **`INTEGER`**：带符号整数。
*   **`REAL`**：8字节浮点数。
*   **`TEXT`**：文本字符串（`UTF-8`）。
*   **`BLOB`**：二进制大对象（图像/音视频）。

## 三.基本查询

### 一.`SELECT`完整格式

```sql
SELECT 字段名 | *
[FROM 数据表名称]
[WHERE 条件表达式]
[ORDER BY 字段名 [ASC | DESC]]
```

### 二.条件子句 (`WHERE`)

**关系运算符**：`>` (大于), `<` (小于), `>=` (大于等于), `<=` (小于等于)。
*   适用于**数值型、字符型、日期型**。

**字符匹配 (`LIKE`)**：
*   **`%`**：任意个任意字符（`%A%` 含A，`A%` A开头）。
*   **`_`**：一个任意字符（`A_` A开头后接一个字符）。

**逻辑运算符**：
*   **`and`**：同时成立。
*   **`or`**：有一个成立。
*   **`not`**：取反。

### 三.排序子句 (`ORDER BY`)

*   **`ASC`**：**递增**（默认）。
*   **`DESC`**：**递减**。

### 四.聚集函数

| 函数 | 功能 |
| :--- | :--- |
| **`COUNT()`** | **统计行数** |
| **`SUM()`** | **计算和** |
| **`MIN()`** | **最小值** |
| **`MAX()`** | **最大值** |
| **`AVG()`** | **平均值** |

### 五.数据操作

**1. 添加记录 (`INSERT`)**
```sql
INSERT INTO 表名 (字段1, ...) VALUES (值1, ...)
```
*   值由 `VALUES` 指定，未指定则**为空**。

**2. 编辑记录 (`UPDATE`)**
```sql
UPDATE 表名 SET 字段1 = 新值 WHERE 条件;
```

**3. 删除记录 (`DELETE`)**
```sql
DELETE FROM 表名 WHERE 条件;
```

## 出处：23数媒2班 陆云清
