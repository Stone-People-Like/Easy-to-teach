# 《网络技术基础》

[TOC]

## 第一单元 网络基石

### 任务一 追溯计算机网络发展脉络

#### 1.计算机网络的产生和发展

**1969年11月**，首个分组交换网络 **ARPANET（阿帕网）** 建成，初期仅 **4个节点**。

1.  **诞生阶段（单主机中心化）**

    以**单个计算机为中心**，通过远程联机**共享主机资源**。**终端**无自主处理能力，所有任务由主机完成。此阶段存在**主机负荷重、线路利用率低、可靠性差**的问题。

2.  **形成阶段（多主机互联）**

    发展为**多个主机通过通信线路互联**（如ARPANET）。主机间由 **IMP（接口报文处理机）** 转接连通。各大公司制定了**各自的网络技术标准**，但**互不统一，体系独立**。

3. **互联互通阶段（标准化与开放）**

   建立了**统一的网络体系结构**和**国际标准**。

   *   1978年：**`ISO`** 提出 **`OSI/RM`（开放系统互联参考模型）**，标志着互联阶段开始。
   *   1983年：**`TCP/IP`** 成为ARPANET标准协议，标志着**现代互联网诞生**。
   *   1983年：**`DNS`（域名系统）** 被引入，**解决了`IP`地址难记的问题**。
   *   1989年：**`WWW`（万维网）** 发展和 **`ISP`（互联网服务提供商）** 兴起，互联网开始**迅速普及并向公众开放**。

4.  高速网络技术阶段

    第四代计算机网络进入了**高速网络与移动互联网**阶段。网络传输速度得到了显著的提升

#### 2.计算机网络的概念和功能

*   计算机网络的概念

    是指将**地理位置不同且具有独立功能**的多台计算机及其外部设备，通过**通信设备和通信线路**连接起来

    1.  主体：具有**独立功能**的计算机系统，对于**网络没有依赖性**（离网也可以运行）
    2.  目的：解决计算机之间的**数据通信和资源共享**（数据通信 > 资源共享）
    3.  概念：**由软硬件构成的复杂系统**，不仅包括计算机系统，通信设备，通信线路等硬件设备，还需要多种网络软件的密切配合和支持
    4.  组成：网络**连接对象**（元件），**网络传输介质**，网络连接的控制机制（**通信协议和软件**）和网络**连接方式**

*   计算机网络的功能和作用

    1.  数据通信

        是计算机网络的**最基本功能**

    2.  资源共享

        建立计算机网络的**主要目的**

        |    分类    | 描述                           |
        | :------: | ---------------------------- |
        | **数据共享** | 共享文档，数据，数据库等信息资源             |
        | **软件共享** | 共享各类程序资源（编译器，工具软件，应用程序及服务程序） |
        | **硬件共享** | 共享使用网络中的硬件资源                 |

    3.  提高系统可靠性

        通过**冗余和容错机制**来提高系统的稳定性和可靠性

    4.  分布处理

        将一件**较大的工作分配给网络上多台计算机去共同完成**，从而有效缩短任务完成时间

    5.  负载平衡

        通过将**工作负载相对均匀的分配到网络中的多个服务器和设备上**，避免设备过载或浪费资源，从而提高整体的稳定性和可靠性

#### 3.计算机网络的分类

*   按网络覆盖的地理范围

    | 分类         | 传输距离       | 举例              |
    | ---------- | ---------- | --------------- |
    | 个域网（`PAN`） | 通常约十米      | 热点              |
    | 局域网（`LAN`） | 几十米\~几千米   | 校园网             |
    | 城域网（`MAN`） | 几万米\~十万米   | 城市公共`WiFi`      |
    | 广域网（`WAN`） | 几百千米\~几千千米 | 因特网（`Internet`） |

*   按传输介质

    *   有线网

        采用同轴电缆，双绞线和光纤等有线传输介质。

        优点：**速度快，距离远，稳定性高，安全性也比较高**

        缺点：**安装和维护成本高，不便于移动**

    *   无线网

        通过无线电波，红外线等无线传输介质实现设备间互联的网络形式，核心特征为**无需依赖物理线路**即可完成数据通信和传输

        优点：具备灵活性与移动性等特点

        缺点：**易受干扰和阻挡**，存在一定的安全隐患

        |       网络类型       |           覆盖范围            |       举例       |
        | :------------------: | :---------------------------: | :--------------: |
        | 无线个域网（`WPAN`） |           小于10米            |  蓝牙，`NFC`等   |
        | 无线局域网（`WLAN`） |           小于100米           |    `WiFi`网络    |
        | 无线城域网（`WMAN`） | 大于100米，一般为3千米\~5千米 |   智慧城市系统   |
        | 无线广域网（`WWAN`） |      覆盖更大的地理区域       | 蜂窝移动通信网络 |

####  4.物联网技术
1. 物联网的概念
    * 物联网（`Internet of Things`）概念于1999年提出，目前尚未形成精确，统一的定义。
    * 行业内物联网定义的核心是：物联网的每一个对象都可以寻址，每一个物理对象都可以控制，每一个物理对象都可以通信
2. 物联网的特点
    *  物联网的技术基础和核心依旧是互联网
    * 物联网中的物要满足一下条件才能被纳入“物联网”的范围：
        1. 具备数据传输通道
        2. 具有一定的数据存储能力
        3. 有CPU
        4. 有专门的应用程序
        5. 遵循物联网的通信协议
        6. 在网络世界中拥有可识别的唯一编码
1. 物联网分类

| 分类 | 举例 |
| :-- | -- |
| 私有物联网 | 面向单一结构内部提供服务 |
| 公有物联网 | 基于互联网向大众或大型用户群体提供服务 |
| 社区物理网 | 特点关联的社区或机构群体 |
| 混合物联网 | 上述两种或以上的物理网的组合 |


3. 物联网的主要应用领域
物理网的典型应用包括：水电行业无线远程自动抄表系统，数字城市系统，智能交通系统，家具监控系统，产品质量监管系统等
#### 5.云计算
2006年，谷歌提出了“云”的概念，亚马逊推出了云平台

### 任务二 剖析计算机网络系统组成
#### 1.计算机网络系统组成
* 按系统组成结构描述
  计算机网络系统是由：网络硬件系统和网络软件系统组成
    * 硬件系统：网络服务器，工作站，网络通信设备和网络传输介质
    * 软件系统：网络操作系统，网络协议，网络通信软件和网络应用软件
* 按逻辑功能描述
  计算机网络分为通信子网和资源子网
    * 通信子网：各种传输介质，通信设备和相应的网络协议组成
    * 资源子网：负责全网的数据处理业务。由计算机系统，终端控制器，终端设备，软件和可共享的数据等组成
#### 2.计算机网络硬件
* 网络服务器与工作站
    * 网络服务器
    是计算机的核心组成部分，专门用于提供网络服务或资源。
    特点：速度快，容量大，可靠性高
    
    | 根据结构特点分类 | 描述                                                         |
    | ---------------- | ------------------------------------------------------------ |
    | 塔式服务器       | 与台式计算机相似                                             |
    | 机架式服务器     | 安装在标准的机柜里，服务器高度单位为“U”，`1U=4.45`厘米       |
    | 刀片式服务器     | 一种紧凑的独立服务器，每块刀片实际上是一块系统主板可以运行各自的操作系统，且都支持热插拔 |
    
    * 工作站
    
      1. **广义上**，指用户与网络的**接口设备**，即**客户机（Client）**。它通过**网卡、通信介质及通信设备**连接到网络服务器，从而**访问网络并共享资源**。
      2. **狭义上**，指**高性能计算机系统**，专用于**科学计算、工程设计、媒体制作**等需要**强大计算与图形处理**能力的专业任务。
    
      **专业级工作站**与普通个人计算机相比，通常配备**更强大的处理器、更大容量的内存、专业级图形处理单元（`GPU`）以及更大容量的存储设备**，以满足对**高性能与高稳定性**的专业需
    
* 网络通信设备

    1. 网卡

       **网卡（网络适配器）** 是计算机连接网络的**物理接口与桥梁**，其核心功能是**数据封装/解封、链路管理及信号编解码**。

       #### **核心标识：`MAC`地址**

       每块网卡拥有全球唯一的 **48位物理地址（`MAC`地址）**，格式为 **6组两位十六进制数**（如 `00:E0:6F:FF:D0:26`）。
       **查看方法**：在命令行中输入 **`ipconfig /all`** 即可查询。

       #### **网卡的主要分类**

       网卡可依据不同的技术标准进行分类，下表清晰展示了其主要类别：

       | 分类标准             | 主要类型                                                     | 说明与现状                                                  |
       | :------------------- | :----------------------------------------------------------- | :---------------------------------------------------------- |
       | **传输速度**         | `10Mbps` / `100Mbps` / **`10/100Mbps` 自适应** / **`1000Mbps` (千兆)** / 万兆网卡 | 速度是核心性能指标，**千兆网卡**是当前主流。                |
       | **连接介质（接口）** | **`RJ-45`** (双绞线) / **`BNC`** (同轴细缆) / **`AUI`** (同轴粗缆) / **光接口** (光纤) | **`RJ-45`接口**是目前最主流的电接口。                       |
       | **工作原理（标准）** | **以太网 (`Ethernet`)** / 令牌环 (`Token Ring`) / `ATM`      | **以太网**是绝对主导的局域网技术标准。                      |
       | **总线类型（插槽）** | **`PCI / PCIe`** (内置) / **`USB`** (外置) / ISA (已淘汰)    | **`PCIe`**是主板内置网卡的标准总线，**`USB`网卡**便于扩展。 |
       | **物理接口形式**     | **电接口** (如`RJ-45`) / **光接口** (如`SFP+`)               | 光接口主要用于高速、远距离传输。                            |

       #### **总结**

       目前，**最常用、最主流的网卡**是 **采用`RJ-45`接口、基于`PCIe`总线、支持千兆速率的以太网卡**。

    2. 中继器

       **中继器**是用于在网络节点间**双向转发并放大物理信号**的设备。其主要功能是对信号进行**整形与放大**，以**补偿信号衰减、延长传输距离**，从而扩展网络覆盖范围。

       按应用场景主要分为两类：

       - **无线中继器**：接收并放大**无线路由器或基站**的信号，以**扩大无线网络的覆盖范围**。
       - **有线中继器**：用于**以太网**等有线网络，通过放大信号来**突破电缆的距离限制**，扩展网络物理范围。

    3. 交换器

       **交换机**是一种为网络节点提供**独立信号通路**的网络互联设备。

       **主要分类与接口：**

       - **外观结构**：主要分为**固定端口交换机**和**模块化交换机**（可通过更换业务板灵活调整端口）。
       - **常见接口**：包括**`RJ-45`接口**（双绞线）、**光纤接口**，以及用于配置的 **`Console` 接口**。

       **核心功能：**

       - **核心数据转发与交换**
       - **端口隔离与安全控制**
       - **负载均衡**
       - 支持**物理编址、网络拓扑、错误校验及流量控制**

       **高级功能**（具备二层/三层交换技术的交换机）：

       - **虚拟局域网（`VLAN`）划分**
       - **访问列表控制**
       - **路由管理** 等网络管理功能

    4. 路由器

       **路由器**是用于**连接不同网络**、并基于 **IP 地址** 为数据包选择传输路径的硬件设备。

       **主要分类：**

       - **按应用层面**：可分为**家用路由器**（端口少、功能简单）、**企业级路由器**和**核心路由器**。
       - **按端口结构**：分为**固定端口路由器**和**模块化路由器**（可通过模块扩展端口与功能）。

       **核心功能：**

       - **连接异构网络**（如不同类型局域网、局域网与广域网）。
       - **路由选择**：根据数据包的**目的 `IP` 地址**查询**路由表**，决定最优转发路径，实现网络间高效可靠通信。

    5. 无线访问接入点

       **无线访问接入点**（`AP`）是**接收有线/无线信号并将其转换为无线广播**的网络设备，作为**桥梁**使手机、电脑等终端接入网络，广泛应用于**家庭、企业及公共场所**。

    6. 无线访问控制器

       **无线访问控制器**（AC）是一种用于**集中化管理**多个无线AP的网络设备。它主要实现对AP的**统一配置**、无线用户的**接入认证**以及网络**安全策略控制**。

* **网络传输介质**

    - 有线传输介质

      1. 同轴电缆

         **同轴电缆**是一种由**中心导体、绝缘层和外层屏蔽层**同轴组成的电缆。其主要特点是**传输速率较低**，目前在计算机网络中**已基本淘汰**。

      2. 双绞线

         **双绞线（`TP`）** 是最常见的有线传输介质，由多对**相互绞合**的绝缘铜导线组成，以抑制信号干扰。主要分为：

         | 类型                      | 特点                                                         | 应用场景                         |
         | :------------------------ | :----------------------------------------------------------- | :------------------------------- |
         | **非屏蔽双绞线（`UTP`）** | **成本低、重量轻、易弯曲、安装简单**；但**抗干扰能力较弱**，存在信号辐射。 | **普遍用于局域网**结构化布线。   |
         | **屏蔽双绞线（`STP`）**   | 在导线与外皮间增加**金属屏蔽层**，**抗干扰能力强、传输速度更高**，但**价格更贵、更硬更难安装**。 | 对**保密或电磁环境复杂**的场合。 |

         **性能等级（常见类别）**：

         - **五类线（`CAT5`）**：最高支持 **`100 Mbps`**。
         - **超五类线（`CAT5e`）**：最高支持 **`1000 Mbps（1 Gbps）`**，**当前最常用**于百兆/千兆以太网。
         - **六类线（`CAT6`）及以上**：支持更高速率（如万兆），抗干扰性能更强。

         **连接与传输限制**：

         - 两端使用 **`RJ-45` 水晶头** 连接设备（如网卡、交换机）。
         - **单段最大传输距离为 100 米**；可通过中继器扩展，最多 **4 个中继器**，总范围可达 **500 米**。

         **`RJ-45`水晶头线序标准**：

         - 两种国际标准：**`EIA/TIA 568A`** 与 **`EIA/TIA 568B`**。
         - 二者区别在于 **`1&3、2&6` 这四根导线的颜色顺序对换**，两种线序均能保证正常网络通信。

      3. 光纤

         **光纤（光缆）**是一种由**纤芯、包层和保护层**构成的传输介质，利用**光信号**在玻璃或塑料纤维中进行高速数据传送。

         **核心优势：**

         - **高带宽、传输速度快**
         - **信号衰减小、传输距离远**（可达上百公里）
         - **抗电磁干扰能力强**
         - **尺寸小、重量轻**

         **光纤类型对比：**

         | 类型         | 光源                  | 传输距离                                  | 特点与适用场景                             |
         | :----------- | :-------------------- | :---------------------------------------- | :----------------------------------------- |
         | **单模光纤** | **激光**              | **数十至上百公里**                        | 纤芯窄、损耗小，适用于**远程通信及骨干网** |
         | **多模光纤** | **发光二极管（LED）** | 百兆网可达 **`2km`**，千兆网约 **`550m`** | 纤芯宽、成本较低，适用于**短距离、局域网** |

         **应用与趋势：**

         - 主要用于**主干网、高速网、长距离及特殊环境**下的连接。
         - 随着技术成熟与成本下降，**正逐步替代铜缆**成为主流有线传输介质。
         - 常见接口包括：**`SC`、`LC`、`ST`、`FC`、`MT-RJ`、`MPO/MTP`** 等。

      - 无线传输介质

        **无线传输**利用**空间电磁波**实现通信，**突破了有线网络的限制**，为用户提供了**移动通信**的能力。

        **主要无线传输介质可按距离分类如下：**

        | 传输距离   | 介质类型   | 关键特点/常见应用                            |
        | :--------- | :--------- | :------------------------------------------- |
        | **短距离** | **红外线** | 需直线对准，常用于早期设备数据传输。         |
        |            | **蓝牙**   | **短距离射频技术**，广泛用于个人设备互联。   |
        | **远距离** | **微波**   | 用于**卫星通信、地面中继**等远距离无线传输。 |
        |            | **激光**   | 需直线传播，可用于**点对点**的远距离通信。   |

#### 3.计算机网络软件

1. 网络操作系统

   **网络操作系统**是运行于服务器上，用于**高效共享网络资源**并提供**网络服务**的软件集合。除基本操作系统功能外，其核心还包括：

   1. 提供**高效、可靠的网络通信**能力；

   2. 支持**文件传输、电子邮件、远程打印**等多种网络服务。

      ### 常用网络操作系统类型

      | 类型               | 核心特点                                                   | 典型代表与适用场景                                           |
      | :----------------- | :--------------------------------------------------------- | :----------------------------------------------------------- |
      | **`Windows` 系列** | 由**微软**开发，图形化界面友好，易部署与管理。             | `Windows Server 2022 / 2025`，广泛用于中小型企业网络。       |
      | **`Unix` 系列**    | **支持多用户、多任务**，稳定且安全，属于**分时操作系统**。 | 常用于**大型企业、金融、电信**等关键业务领域。               |
      | **`Linux` 系列**   | **开源、免费**，可自由修改源码，拥有**丰富的发行版**。     | `Red Hat`、`Ubuntu`、`CentOS` 等，适用于**服务器、云计算、开发及安全测试**等多元场景。 |

2. 网络协议

   **网络协议** 是计算机网络中实现**数据通信和资源共享**所必须遵循的**规则集合**。

   **核心特点与结构：**

   - 协议通常采用**分层**结构，每层具有**独立功能**和**专属协议**，通信双方必须在**相同层次**上遵循**相同规则**才能交互。

   **协议三要素：**

   1. **语法**：数据的**结构或格式**。

   2. **语义**：数据每一部分的**含义**，以及接收方应采取的**动作或响应**。

   3. **时序**：事件执行的**顺序**与**同步**机制。

      **主要协议类型：**

      | 协议类型         | 核心作用与组成                                               | 应用场景                           |
      | :--------------- | :----------------------------------------------------------- | :--------------------------------- |
      | **`TCP/IP`**     | 互联网通信的**基本标准**，核心包括 **`TCP`（传输控制协议）** 与 **`IP`（网际协议）**。 | **网络互联**的基础协议。           |
      | **`IEEE 802.X`** | 一系列**局域网（`LAN`）** 技术标准，规定了局域网的**物理层和数据链路层**规范。 | 主要用于**局域网接入**及相关技术。 |

3. 网络通信软件

   **网络通信软件**是用于**监督、控制网络通信**的基础软件，能实现计算机与终端或其他计算机间的数据传输。

   其核心组成包括三个管理程序，具体功能如下：

   | 程序组成               | 核心功能                                                     |
   | :--------------------- | :----------------------------------------------------------- |
   | **线路缓冲区管理程序** | **管理数据在通信线路中的缓冲存储**，协调传输与接收速度差异，**防止数据丢失**。 |
   | **线路控制程序**       | **负责建立、拆除通信连接**，并**检测线路状态与故障**（如拨号上网的连接控制）。 |
   | **报文管理程序**       | **处理网络通信中的信息单元（报文）**，负责报文的**组装、拆分、发送与接收**（如电子邮件的封装与解析）。 |

4. 网络应用软件

   **网络应用软件**是基于**网络平台**，为满足用户在**特定领域**（如娱乐、办公、学习）需求而构建的**综合应用解决方案**。其特点在于功能**不限于通信**，更侧重于提供**完整的专项服务**。

   **主要特点与示例：**

   - **核心特点**：在实现**网络通信**的基础上，整合并提供了特定应用场景所需的**全部功能与服务**。
   - **典型示例**：
     - **电商软件（如淘宝）**：除用户登录、商品查询等通信功能外，还提供**商品展示、购物车、在线支付**等完整购物服务。
     - **在线教育软件（如网易云课堂）**：除传输视频、课件外，还包括**课程推荐、学习进度管理**等教学支持功能。

### 任务三 绘制计算机网络拓扑结构

#### 1.网络拓扑结构的概念

**网络拓扑结构**是将网络中的**设备抽象为“点”**、**通信介质抽象为“线”**，从而描述**节点间连接方式和逻辑关系**的几何模型。拓扑图反映了网络的结构布局，与设备的实际物理位置和尺寸无关。

**网络中的节点可分为两类：**

- **转节点**：负责**信息转发与交换**，如**交换机、集线器**。
- **访问节点**：作为**信息的源点或终点**，如**计算机、终端**。

网络拓扑结构**直接决定了数据传输路径、网络的可靠性与扩展性**，因此选择**合适的拓扑结构**对于构建**高效、稳定**的网络至关重要。

#### 2.常见的网络拓扑结构

1. 星状网络拓扑结构

   **星状网络拓扑结构**是最常见的网络拓扑之一。其核心是一个**中央节点**（如交换机），通过**点对点链路**与所有外围节点连接，形成**辐射状**结构。

   **核心特点与机制：**

   - **集中式转发**：所有节点间通信**必须经过中心节点**进行数据接收、地址解析与转发。
   - **角色明确**：**外围节点**功能简单，而**中心节点**需具备**高性能与高可靠性**。

   **典型应用与风险：**

   - 广泛应用于**小型网络**（如家庭、办公室局域网）。
   - 存在明显的**单点故障风险**，即中心节点故障会导致整个网络瘫痪。

2. 总线型网络拓扑结构

   **总线型网络拓扑结构**是以**单根公共通信线路（总线）** 作为传输介质，所有网络节点均**直接连接**到该总线上。

   **核心工作机制：**

   - **广播式通信**：数据以**基带串行**方式在总线上传输，**从发送节点向两端扩散**，因此被称为**广播式计算机网络**。
   - **地址检查**：每个节点都会**检查数据的目标地址**，仅接收与本机地址相符的信息。

   **主要特点与应用：**

   - **无中心控制节点**，各节点地位平等。
   - 结构简单，**成本较低**。
   - 适用于**节点数量较少**且对**成本控制要求高**的网络环境。

3. 环状网络拓扑结构

   **环状网络拓扑结构**是将网络节点通过**点到点链路首尾相连**，形成一个**封闭的环形**。

   **核心工作机制：**

   - 信号**沿单一方向**顺序传递，每台设备通过**收发器**进行接收与转发。
   - 信号在每台设备上的**延时固定**，因此**适合对实时性要求高**的局域网。

   **信息传递过程：**

   1. 信息发出后，沿环依次经过每个节点。
   2. 当地址匹配时，目标节点**接收信息**，但信息**继续向下游流动**。
   3. 信息最终**回到发送节点并被回收**，从而**避免无限循环**。

4. 网状网络拓扑结构

   **网状网络拓扑结构**中，每个节点**至少有两条链路**与其他节点连接，构成网状结构。

   **核心特点与机制：**

   - **高可靠性**：任何一条链路出现故障时，数据可通过**其他正常链路**传输，具备**路径冗余**能力。
   - **适用于大型网络**：目前**大型广域网**普遍采用此结构，并使用**路由算法**计算数据传输的**最佳路径**。

5. 树状网络拓扑结构

   **树状网络拓扑结构**是一种**分层**结构，可视为**多级星状网络**的组合，整体呈**三角形**分布。

   **结构特点与工作机制：**

   - **分层结构**：与网络层次对应，顶端为**核心层**，中间为**汇聚层**，下端为**边缘层**。
   - **控制方式**：采用**分级集中控制**。
   - **连接特性**：传输介质有**多条分支**，但**不形成闭合回路**，每条线路均支持**双向传输**。

#### 3.常见的网络拓扑结构优缺点

| 拓扑结构       | 优点                                                         | 缺点                                                         |
| :------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **星状拓扑**   | 1. **结构简单，易扩展、易管理维护**。 2. **故障易隔离**，单点故障不影响全网。 3. 网络**延迟低，误差小**。 4. **支持多种传输介质**。 | 1. **依赖中心节点**，其故障会导致全网瘫痪。 2. **布线成本较高**。 3. **通信效率较低**，所有数据需经中心转发。 4. **线路利用率低**。 |
| **总线型拓扑** | 1. **所需电缆少，布线简单，成本低**。 2. **结构简单，易于扩展**。 3. **信道利用率高**（多节点共用）。 | 1. **传输距离和节点数有限制**。 2. **故障诊断困难**。 3. 节点过多时，**总线易成性能瓶颈**。 |
| **环状拓扑**   | 1. **电缆长度短**。 2. **适合高速、远距离传输**（如使用光纤）。 3. 节点**通信权限平等**。 | 1. **可靠性差**，单点故障可致全网中断。 2. **故障检测困难**，扩展性差。 3. **负载轻时信道利用率低**（令牌传递机制）。 |
| **网状拓扑**   | 1. **可靠性极高**，**路径冗余**，局部故障不影响全网。 2. **碰撞和阻塞少**。 | 1. **结构复杂，组网成本高昂**。 2. **控制机制复杂**（需路由与流量控制）。 3. **不易扩展**。 |
| **树状拓扑**   | 1. **易于扩展**，便于增加分支和节点。 2. **故障隔离较简单**（可隔离分支故障）。 | **严重依赖根节点**，根节点故障会导致其下属子网通信中断。     |

## 第二单元 网络通信

### 任务一 探索通信协议与网络模型

#### 1.网络协议要素

**网络协议**包含三个核心要素：

| 要素     | 核心作用                                               | 通俗比喻（接力传话游戏）                   |
| :------- | :----------------------------------------------------- | :----------------------------------------- |
| **语义** | 规定控制信息的**含义**，即通信双方“**做什么**”。       | 指需要**传递的具体内容**。                 |
| **语法** | 规定数据的**结构与格式**，即“**怎么做**”。             | 指**传递的固定格式与规则**。               |
| **时序** | 规定通信的**顺序、同步与速度匹配**，即“**做的顺序**”。 | 指**传递的轮次与顺序**，确保信息有序传递。 |

三者协同工作，确保网络通信**准确、有序**。

#### 2.网络协议分层设计

**网络体系分层设计**是为了**简化复杂网络系统的设计与实现**，将其逻辑上划分为多个**功能层**，各层通过组合提供完整的通信服务。

**邮政系统类比**：如同邮政系统分层处理信件（收件、分拣、运输、投递），网络通信也分层工作，**每层只需完成自身特定功能**，即可协同完成端到端的数据传输。

**分层设计的核心优点**：

1. **易于实现与维护**：系统被分解为多个相对独立的子层。
2. **高内聚低耦合**：**各层功能明确**，下层为上层提供服务，上层通过接口调用下层功能。
3. **灵活性与可扩展性**：当某层技术更新时，只要**接口保持不变**，其他层就不受影响。
4. **促进标准化**：分层结构更易于**理解、交流与制定统一标准**，推动技术发展。

#### 3.`OSI`参考模型

**`OSI`（开放系统互连）参考模型**由国际标准化组织（`ISO`）提出，它将网络通信功能划分为 **7个层次**，以**简化复杂网络系统的设计与实现**。其核心思想是：**上层依赖于下层，下层为上层提供服务**，各层之间相互独立又协同工作。

**`OSI`模型七层结构**

| 层级      | 名称           | 核心功能                                                     | 数据单元   |
| :-------- | :------------- | :----------------------------------------------------------- | :--------- |
| **第1层** | **物理层**     | **在物理媒介上传输原始比特流**，定义电气、机械与物理规约。   | **比特**   |
| **第2层** | **数据链路层** | **在相邻节点间提供可靠的数据帧传输**，负责**物理寻址（`MAC`）、差错控制与流量控制**。 | **帧**     |
| **第3层** | **网络层**     | **负责不同网络间的路径选择与逻辑寻址**（如`IP`地址），实现**数据包的路由与转发**。 | **数据包** |
| **第4层** | **传输层**     | **提供端到端的可靠或不可靠传输**，负责**流量控制、差错校验及端口寻址**（如`TCP/UDP`）。 | **数据段** |
| **第5层** | **会话层**     | **建立、管理和终止应用程序之间的会话**。                     | `SPDU`     |
| **第6层** | **表示层**     | **处理数据的表示形式**，负责**数据格式转换、加密与压缩**。   | `PPDU`     |
| **第7层** | **应用层**     | **为最终用户提供网络服务接口**（如`HTTP`、`FTP`、`SMTP`）。  | `APDU`     |

**通俗比喻**（以家庭聚会为例）：

- **物理层**：选择并确保**所有人能到达**聚会地点。
- **数据链路层**：发送**邀请函**，确保**每位成员准确收到**信息。
- **网络层**：规划**最佳路线**，让大家**顺利抵达**。
- **传输层**：负责**礼物包装**，确保礼物（数据）在途中**完好无损**。
- **会话、表示、应用层**：分别对应聚会中的**交谈、礼仪和具体活动内容**，保障聚会顺利开展。

#### 4.`TCP/IP`参考模型

**`TCP/IP` 参考模型**是互联网实际使用的**事实标准**，它将网络通信划分为 **4 个功能层**，相比 `OSI` 七层模型**更简化、更注重实际数据传输**。

**`TCP/IP` 模型与 `OSI` 模型对应关系**

| `TCP/IP` 模型（4层） | 对应的 `OSI` 模型（7层）   | 核心功能与协议                                               |
| :------------------- | :------------------------- | :----------------------------------------------------------- |
| **应用层**           | **应用层、表示层、会话层** | 为用户提供**网络服务接口**，包含 **`HTTP`、`FTP`、`SMTP`、`DNS`** 等协议。 |
| **传输层**           | **传输层**                 | 提供**端到端的通信**，核心协议为 **`TCP`（可靠连接）** 与 **`UDP`（高效无连接）**。 |
| **网络层**           | **网络层**                 | 负责**逻辑寻址、路由选择与分组转发**，核心协议为 **`IP`、`ICMP`、`IGMP`**。 |
| **网络接口层**       | **数据链路层、物理层**     | 负责**在物理网络中接收与发送数据包**，支持以太网、`Wi-Fi` 等多种底层网络技术。 |

**传输层核心协议对比**

| 特性         | **`TCP`（传输控制协议）**                                   | **`UDP`（用户数据报协议）**                |
| :----------- | :---------------------------------------------------------- | :----------------------------------------- |
| **连接方式** | **面向连接**（需建立、维护、拆除连接）                      | **无连接**（直接发送）                     |
| **可靠性**   | **高可靠**（提供确认、重传、排序、流量/差错控制）           | **不可靠**（不保证交付、可能丢失或乱序）   |
| **传输效率** | 相对较低（因额外控制开销）                                  | **高**（头部开销小，无连接管理）           |
| **适用场景** | **`Web` 浏览（`HTTP`）、邮件（`SMTP`）、文件传输（`FTP`）** | **视频流、语音通话、`DNS` 查询、实时游戏** |

**总结**

- `TCP/IP` 模型是互联网的**实际运行框架**，`OSI` 模型是**理论参考标准**。
- `TCP/IP` 的**网络层**和**传输层**是核心，分别由 **`IP`** 和 **`TCP/UDP`** 协议支撑。
- **应用层**直接面向用户，聚合了 `OSI` 上三层的功能，协议丰富多样。

### 任务二 理解`TCP/IP`协议

#### 1.`TCP/IP`协议集

**`TCP/IP` 协议体系**是互联网最基础的通信框架，采用**四层结构**。各层功能及核心协议如下：

| 层级           | 主要协议                                           | 核心功能说明                                                 |
| :------------- | :------------------------------------------------- | :----------------------------------------------------------- |
| **应用层**     | **`HTTP`、`DNS`、`FTP`、`SMTP`、`POP3`、`Telnet`** | **直接面向用户应用**，负责处理**具体业务逻辑**（如网页访问、邮件收发、文件传输）。 |
| **传输层**     | **`TCP`、`UDP`**                                   | 提供**端到端**的通信服务。**`TCP` 提供可靠连接**，**`UDP` 提供高效无连接**传输。 |
| **网络层**     | **`IP`、`ICMP`、`IGMP`、`ARP`、`RARP`**            | 负责**逻辑寻址、路由选择与分组转发**，实现数据包跨网络传送。 |
| **网络接口层** | **`Ethernet`、`PPP`、`ATM`**                       | 管理**物理媒介**上的数据传输，处理**链路管理、错误检测**等底层细节。 |

#### 2.`TCP`协议

1. `TCP`协议

   TCP 提供的核心服务可概括为以下五点：

   - **面向连接**：通信双方在传输数据前，必须**先建立一条专用的逻辑连接**。
   - **端到端通信**：每个连接严格限定在**通信的两端之间**。
   - **可靠传输**：通过确认、重传等机制，**确保数据无差错、不丢失、不重复，并按发送顺序到达**。
   - **全双工通信**：允许连接双方**在同一时刻同时进行双向数据传输**。
   - **面向字节流**：提供**流式数据传输接口**，应用程序通过连接交换的是**无消息边界的字节序列**。

2. `TCP`数据报

   TCP 传输的数据单元称为 **报文段**，由 **首部（20字节）** 和 **数据** 两部分构成。

   - **TCP 数据报（报文段）格式**

     | 字段             | 长度 / 位置  | 功能说明                                                     |
     | :--------------- | :----------- | :----------------------------------------------------------- |
     | **源端口号**     | 16 位        | **标识发送方的应用程序**。                                   |
     | **目标端口号**   | 16 位        | **标识接收方的应用程序**。                                   |
     | **首部（其他）** | 通常 20 字节 | 包含**序列号、确认号、标志位**等控制信息，用于实现可靠性、流量控制等机制。 |
     | **数据**         | 可变长度     | 承载**应用层**的实际数据。                                   |

   - **核心要点**：**“源端口号”与“目标端口号”** 各占 16 位，它们与 **`IP` 地址** 结合，共同**唯一标识一个 `TCP` 连接的两个端点**，是数据准确送达目的地的关键。

   - **通俗理解**：`TCP` 如同一位**严谨的电话接线员**，通信前先建立“专线”，确保通话**内容完整、无重复、按序到达**，并支持**双向实时通信**，数据如同“水流”一样在连接中交换。

3. `TCP`端口号

   - TCP 使用 **端口号** 来区分不同的应用程序，并提供传输服务。传输层使用 **16 位的端口号**，因此共有 **65536 个可用端口**（范围 **0~65535**）。

     | 端口范围         | 类别                | 分配与使用说明                                 |
     | :--------------- | :------------------ | :--------------------------------------------- |
     | **0 ~ 1023**     | **保留端口号**      | 分配给**标准应用服务**（如 `HTTP`、`FTP`）。   |
     | **1024 ~ 65535** | **动态/自由端口号** | 供**用户自定义服务**或客户端程序**临时使用**。 |

   - **常见 TCP 端口号示例：**

     | 端口号  | 协议名称   | 说明             |
     | :------ | :--------- | :--------------- |
     | **21**  | **`FTP`**  | 文件传输协议     |
     | **22**  | **`SSH`**  | 安全外壳协议     |
     | **25**  | **`SMTP`** | 简单邮件传输协议 |
     | **80**  | **`HTTP`** | 超文本传输协议   |
     | **110** | **`POP3`** | 邮件协议 3       |

4. `TCP`连接的建立

   - TCP 通过 **三次握手** 来建立可靠连接，这是一个确保双方都**在线且能正常通信**的过程，可以概括为：

     1. **打招呼**：客户端向服务器发送一个 **连接请求**。
     2. **回话**：服务器收到后，**同时回复一个确认和应答**。
     3. **最终确认**：客户端再向服务器发送一个 **最终确认**。至此，连接建立成功。

     **通俗理解**：这就像打电话时确认通话是否畅通——

     1. 你说：“**喂，听得到吗？**”（请求）
     2. 对方答：“**听得到，你听得到我吗？**”（应答）
     3. 你确认：“**嗯，我也听得到。**”（确认）
        **双方都明确知道线路通畅后，才开始正式交谈**。

#### 3.`UDP`协议

`UDP`是一种**面向无连接、不可靠**的传输层协议。它没有建立和释放连接的过程，**传输速率高**，常用于**网络会议、直播、视频点播**等对实时性要求高的多媒体传输场景。

- `UDP`端口号

  | `UDP` 端口号 | 协议名称   | 核心功能                                             |
  | :----------- | :--------- | :--------------------------------------------------- |
  | **53**       | **`DNS`**  | 域名解析系统，用于将域名转换为 `IP` 地址。           |
  | **67 / 68**  | **`DHCP`** | 动态主机配置协议，用于自动分配 `IP` 地址等网络配置。 |
  | **69**       | **`TFTP`** | 简单文件传输协议，用于轻量级的文件传输。             |
  | **123**      | **`NTP`**  | 网络时间协议，用于同步计算机的系统时间。             |
  | **161**      | **`SNMP`** | 简单网络管理协议，用于网络设备的监控与管理。         |

- `UDP`的特点

  `UDP` 协议的核心特点如下：

  - **无连接**：传输数据前**不需要建立连接**，直接发送。
  - **不可靠**：**不保证**数据一定送达，**不提供**重传、排序或确认机制。
  - **无拥塞控制**：网络拥塞时**不会主动降低**发送速率，可能加剧网络负担。

- `UDP`数据报格式

  `UDP` 数据报由 **首部（8字节）** 和 **数据** 两部分组成。

  | 首部字段       | 长度  | 功能说明                                                 |
  | :------------- | :---- | :------------------------------------------------------- |
  | **源端口号**   | 16 位 | 标识**发送方**的应用进程。                               |
  | **目标端口号** | 16 位 | 标识**接收方**的应用进程。                               |
  | **`UDP` 长度** | 16 位 | 指定**整个`UDP`数据报**的长度（单位：字节，最小值为8）。 |
  | **校验和**     | 16 位 | 用于**检测**数据在传输过程中**是否出错**（可选字段）。   |

  **总结**：`UDP` 结构简单、开销小，适用于对**实时性要求高、可容忍少量丢包**的应用（如音视频流、`DNS`查询）。

#### 4.`TCP`协议与`UDP`协议对比

`TCP` 与 `UDP` 是两种核心的传输层协议，其核心差异对比如下：

| 特性         | **`TCP` 协议**                                               | **`UDP` 协议**                                    |
| :----------- | :----------------------------------------------------------- | :------------------------------------------------ |
| **连接方式** | **面向连接**（需通过三次握手建立连接）                       | **无连接**（直接发送数据）                        |
| **可靠性**   | **高可靠**（提供确认、重传、排序机制）                       | **不可靠**（不保证数据送达，可能丢包、乱序）      |
| **首部开销** | **大**（通常 20 字节或更多，含控制信息）                     | **小**（固定 8 字节）                             |
| **控制机制** | 具备**流量控制**与**拥塞控制**                               | **无**相关控制机制                                |
| **传输效率** | **相对较低**（因建立连接及控制开销）                         | **高**（无需连接，开销小）                        |
| **典型应用** | **文件传输（`FTP`）、网页浏览（`HTTP`）、电子邮件（`SMTP`）** | **域名解析（`DNS`）、视频流、在线游戏、实时通信** |

**总结**：**`TCP` 确保数据准确送达**，适合对**可靠性要求高**的应用；**`UDP` 追求传输速度**，适合对**实时性要求高**且可容忍少量数据丢失的场景。

### 任务三 规划和设置`IP`地址

#### 1.`IP`地址的概念

1. 网际协议`IP`

   **网际协议(IP)** 是位于**网络层**的核心协议，负责在互联网中**传送数据包**。

   **核心作用**：

   - **寻址与路由**：为数据包选择**最佳传输路径**，将其从**源主机**准确送达**目标主机**。

   **通信前提**：

   - 网络中每台设备都必须具有**唯一的IP地址**（同一网络内不可重复）。

   **数据封装**：

   - 传输层的数据会被**加上IP头部**（包含源和目标IP地址），封装成 **IP数据包**。

   **数据封装分层示意**：

   | 层级           | 数据单元                   |
   | :------------- | :------------------------- |
   | **网络层**     | **`IP` 头部** + 传输层数据 |
   | **数据链路层** | `MAC` 头部 + `IP`数据包    |

   **通俗理解**：`IP` 协议像一个**负责送信的信使**，它拿着写有**发送方和接收方地址**（`IP`地址）的数据包，在复杂的网络道路中为其选择路径，最终确保“信件”准确送达目的地。

2. `IP`协议的功能

   `IP` 协议的核心功能是在互联的网络间**传递 `IP` 数据包**，它规定了**网络层通信的基本规则**。

   **通俗类比**：如同现实中的货物运输，`IP` 协议定义了 **“打包规则”**：

   - 规定了数据传输的**基本单元（`IP`数据包）** 和**格式**。
   - 设定了用于寻址的 **“运输地址”（`IP` 地址）**，确保数据能在网络中准确送达。

3. `IP`协议的特点

   IP 协议提供的是**不可靠、无连接、尽力而为**的数据包传输服务。

   | 特点         | 核心解释                                                     | 通俗类比                                                     |
   | :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
   | **不可靠**   | **不保证**数据包正确送达，**不负责**纠错或通知收发双方传输失败。 | 如同**基础版快递**，只负责送出包裹，**不确认**是否安全到达，**不检查**包裹是否损坏。 |
   | **无连接**   | 发送前**不建立专用连接**，每个数据包都**独立寻路**。         | 如同快递员**每次送货都临时选择**最优路线，没有固定路径。     |
   | **尽力而为** | **不会随意丢弃**数据包，仅在**资源耗尽、出错或故障**等极端情况下才丢弃。 | 如同快递员遇到**无法克服**的障碍（如道路中断）才会放弃，否则**会尽力送达**。 |

4. `IP`数据包

   `IP`数据包是`IP`协议的核心传输单元。

   - 核心定义：它是计算机网络中进行设备间通信的**基本数据单元**。
   - 核心功能：负责将数据从**源设备**传输到**目标设备**，并确保数据在网络中正确**路由与传递**。
   - 核心头部：采用 **“头部 + 数据”** 结构，总长度为**可变长**。
   - **`IPv4`数据包头部**：长度为 **20 ~ 60 字节**，其中**前20字节为固定字段**。

#### 2.`IP`地址的格式

- `IP`地址的作用

  网络通信中，每个主机都需要一个**唯一的逻辑地址**，即 **`IP` 地址**。同一网络内**地址不可重复**，否则会发生 **`IP` 地址冲突**。

- `IPV4`地址格式

  | 格式               | 说明                                                         | 示例          |
  | :----------------- | :----------------------------------------------------------- | :------------ |
  | **二进制格式**     | 32位二进制数，如 `11000000 10101000 00000010 00000001`       | `192.168.2.1` |
  | **点分十进制格式** | 将32位**分为4个字节**，每个字节（0-255）用十进制表示，以点分隔，如 `192.168.2.1` | `192.168.2.1` |

#### 3.`IPV4`地址分类

IPv4地址共约2个，为便于管理，划分为 **A、B、C、D、E** 五类。

| 地址类别 | **首字节范围** | **网络标识长度** | **主机标识长度** | **核心用途**                       |
| :------- | :------------- | :--------------- | :--------------- | :--------------------------------- |
| **A 类** | **0 ~ 127**    | 8 位             | 24 位            | **大型网络**（如运营商骨干网）     |
| **B 类** | **128 ~ 191**  | 16 位            | 16 位            | **中型网络**（如大企业、校园网）   |
| **C 类** | **192 ~ 223**  | 24 位            | 8 位             | **小型网络**（如家庭、小型办公室） |
| **D 类** | **224 ~ 239**  | -                | -                | **组播地址**（一对多通信）         |
| **E 类** | **240 ~ 255**  | -                | -                | **保留地址**（用于科研实验）       |

**关键点说明**

1. **网络号与主机号**：地址由**网络号**（标识所属网络）和**主机号**（标识该网络内具体设备）两部分组成。
   - **A类**：`10.20.101.19` → 网络号是 **`10`**，主机号是 **`20.101.19`**。
   - **C类**：`192.168.2.1` → 网络号是 **`192.168.2`**，主机号是 **`1`**。
2. **可用地址数量**：
   - **A类**：可用网络 **126** 个，每个网络可容纳约 **1677万** 台主机。
   - **B类**：可用网络 **1.6万** 个，每个网络可容纳 **6.5万** 台主机。
   - **C类**：可用网络 **209万** 个，每个网络可容纳 **254** 台主机。
3. **特殊地址**：
   - 每个网络的**第一个地址**（主机号全0）为**网络地址**，**最后一个地址**（主机号全1）为**广播地址**，**均不可分配给主机**。
   - **127.x.x.x** 为**环回地址**，用于本机测试（如 `127.0.0.1`）。
   - **D类** 用于组播，**E类** 为保留地址。

#### 4.特殊的`IP`地址

#### 5.子网掩码

## 出处：23数媒2班 陆云清

